@model EventsMS.Models.Event
@{
    ViewData["Title"] = Model.Id == 0 ? "Create Event" : "Edit Event";
}

<div class="container-fluid px-0 mt-4">
    <div class="card shadow-md border-0 overflow-hidden" style="border-radius: var(--radius-lg); background: var(--card-bg);">
        <!-- Card Header -->
        <div class="card-header d-flex align-items-center px-4 py-3"
             style="background: var(--primary); color: white; border-bottom: none;">
            <h4 class="mb-0 fw-bold">
                <i class="bi bi-calendar-event me-2"></i>
                @(Model.Id == 0 ? "Create New Event" : "Edit Event")
            </h4>
        </div>

        <div class="card-body p-4 p-md-5">
            <form asp-action="CreateOrEdit" method="post" enctype="multipart/form-data">
                <input type="hidden" asp-for="Id" />

                <div class="row g-4">
                    <!-- Event Name -->
                    <div class="col-md-6">
                        <label asp-for="Name" class="form-label fw-semibold" style="color: var(--text-primary);"></label>
                        <input asp-for="Name" class="form-control form-control-lg shadow-sm"
                               placeholder="Enter event name (e.g. Tech Summit 2026)" />
                        <span asp-validation-for="Name" class="text-danger small mt-1 d-block"></span>
                    </div>

                    <!-- Slug -->
                    <div class="col-md-6">
                        <label asp-for="Slug" class="form-label fw-semibold" style="color: var(--text-primary);"></label>
                        <input asp-for="Slug" class="form-control form-control-lg shadow-sm"
                               placeholder="tech-summit-2026" />
                        <span asp-validation-for="Slug" class="text-danger small mt-1 d-block"></span>
                    </div>

                    <!-- Image URL -->
                    <div class="col-12">
                        <label asp-for="ImageUrl" class="form-label fw-semibold" style="color: var(--text-primary);"></label>
                        <input asp-for="ImageUrl" class="form-control form-control-lg shadow-sm"
                               placeholder="https://example.com/images/event-poster.jpg" />
                        <span asp-validation-for="ImageUrl" class="text-danger small mt-1 d-block"></span>
                        <small class="text-muted mt-1 d-block" style="color: var(--text-secondary);">
                            Tip: Use a high-quality banner (recommended 1200×600 px)
                        </small>
                    </div>

                    <!-- Description -->
                    <div class="col-12">
                        <label asp-for="Description" class="form-label fw-semibold" style="color: var(--text-primary);"></label>
                        <textarea asp-for="Description" rows="5" class="form-control shadow-sm"
                                  placeholder="Provide a detailed description of the event..."></textarea>
                        <span asp-validation-for="Description" class="text-danger small mt-1 d-block"></span>
                    </div>

                    <!-- Dates -->
                    <div class="col-md-6">
                        <label asp-for="StartDate" class="form-label fw-semibold" style="color: var(--text-primary);"></label>
                        <input asp-for="StartDate" type="datetime-local" class="form-control form-control-lg shadow-sm"
                               value="@(Model.StartDate != default ? Model.StartDate.ToString("yyyy-MM-ddTHH:mm") : "")" />
                        <span asp-validation-for="StartDate" class="text-danger small mt-1 d-block"></span>
                    </div>

                    <div class="col-md-6">
                        <label asp-for="EndDate" class="form-label fw-semibold" style="color: var(--text-primary);"></label>
                        <input asp-for="EndDate" type="datetime-local" class="form-control form-control-lg shadow-sm"
                               value="@(Model.EndDate != default ? Model.EndDate.ToString("yyyy-MM-ddTHH:mm") : "")" />
                        <span asp-validation-for="EndDate" class="text-danger small mt-1 d-block"></span>
                    </div>

                    <!-- Fee & Meals -->
                    <div class="col-md-4">
                        <label asp-for="RegistrationFee" class="form-label fw-semibold" style="color: var(--text-primary);"></label>
                        <div class="input-group input-group-lg">
                            <span class="input-group-text">৳</span>
                            <input asp-for="RegistrationFee" type="number" step="0.01" min="0"
                                   class="form-control shadow-sm" placeholder="0.00" />
                        </div>
                        <span asp-validation-for="RegistrationFee" class="text-danger small mt-1 d-block"></span>
                    </div>

                    <div class="col-md-4">
                        <label asp-for="MealsOffered" class="form-label fw-semibold" style="color: var(--text-primary);"></label>
                        <input asp-for="MealsOffered" type="number" min="0"
                               class="form-control form-control-lg shadow-sm" placeholder="e.g. 2" />
                        <span asp-validation-for="MealsOffered" class="text-danger small mt-1 d-block"></span>
                    </div>

                    <!-- Category -->
                    <div class="col-md-4">
                        <label asp-for="CategoryId" class="form-label fw-semibold" style="color: var(--text-primary);">Category</label>
                        <div class="input-group input-group-lg">
                            <span class="input-group-text"><i class="bi bi-tags"></i></span>
                            <select asp-for="CategoryId" class="form-select shadow-sm" asp-items="@ViewBag.CategoryId" required>
                                <option value="">-- Select Category --</option>
                            </select>
                        </div>
                        <span asp-validation-for="CategoryId" class="text-danger small mt-1 d-block"></span>
                    </div>

                    <!-- Is Free -->
                    <div class="col-12">
                        <div class="form-check form-switch form-switch-lg mt-2">
                            <input asp-for="IsFree" class="form-check-input" type="checkbox" role="switch" />
                            <label asp-for="IsFree" class="form-check-label fw-semibold" style="color: var(--text-primary);">
                                This is a <strong>Free Event</strong> (no registration fee)
                            </label>
                        </div>
                    </div>
                </div>

                <!-- Form Actions -->
                <div class="d-flex flex-wrap justify-content-end gap-3 mt-5 pt-4 border-top" style="border-top-color: var(--border) !important;">
                    <a asp-action="Index" class="btn btn-outline-secondary btn-lg px-5 rounded-pill">
                        <i class="bi bi-arrow-left me-2"></i> Cancel
                    </a>
                    <button type="submit" class="btn btn-primary btn-lg px-5 rounded-pill shadow-sm">
                        <i class="bi bi-save me-2"></i>
                        @(Model.Id == 0 ? "Create Event" : "Update Event")
                    </button>
                </div>
            </form>
        </div>
    </div>
</div>

@section Scripts {
    <partial name="_ValidationScriptsPartial" />
}

<style>
    /* Form input focus & hover states */
    .form-control:focus,
    .form-select:focus {
        border-color: var(--primary);
        box-shadow: 0 0 0 0.25rem rgba(59, 130, 246, 0.25);
    }

    /* Dark mode adjustments */
    [data-bs-theme="dark"] .form-control,
    [data-bs-theme="dark"] .form-select,
    [data-bs-theme="dark"] .input-group-text {
        background-color: #1e293b;
        color: var(--text-primary);
        border-color: var(--border);
    }

    [data-bs-theme="dark"] .form-check-input {
        background-color: #334155;
        border-color: #475569;
    }

        [data-bs-theme="dark"] .form-check-input:checked {
            background-color: var(--primary);
            border-color: var(--primary);
        }

    /* Button hover */
    .btn-primary:hover {
        background: var(--primary-dark);
        transform: translateY(-2px);
    }

    .btn-outline-secondary:hover {
        background: rgba(255,255,255,0.05);
    }
</style>